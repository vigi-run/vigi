---
import BaseHead from "../components/BaseHead.astro";
import BaseBody from "../components/BaseBody.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import Testimonials from "../components/Testimonials.astro";
import FAQ from "../components/FAQ.astro";
import Monitors from "../components/Monitors.astro";
import TechStack from "../components/TechStack.astro";
import Alerts from "../components/Alerts.astro";
import faqItems from "../data/faq";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "FAQPage",
        mainEntity: faqItems.map((item) => ({
          "@type": "Question",
          name: item.question,
          acceptedAnswer: {
            "@type": "Answer",
            text: item.answer,
          },
        })),
      })}
    />
  </head>

  <body class="bg-[#050508]">
    <BaseBody />

    <Header />
    <main>
      <!-- Hero Section with Animated Gradient -->
      <section class="hero-gradient relative px-4 sm:px-8 pt-20 sm:pt-28 lg:pt-32 pb-16 sm:pb-24">
        <!-- Extra floating orb -->
        <div class="orb-accent"></div>
        
        <div class="relative z-10 max-w-[1100px] mx-auto">
          <h1
            class="text-3xl sm:text-5xl lg:text-6xl font-bold text-center leading-[1.2] text-white px-2 animate-fade-in-up"
          >
            <span class="text-gradient text-glow">C√≥digo Aberto</span> &amp; <span class="text-gradient text-glow">Auto-Hospedado</span>
            <br class="hidden sm:block" />
            monitoramento de tempo de atividade para
            <br class="hidden sm:block" />
            <span class="text-gradient text-glow">pequenas equipes</span>
          </h1>

          <p
            class="text-lg sm:text-xl text-center text-white/70 max-w-[700px] mx-auto my-8 px-3 animate-fade-in-up animate-delay-100"
          >
            Monitoramento de tempo de atividade de n√≠vel de engenharia que voc√™ possui e controla. Sem depend√™ncias de nuvem, sem aprisionamento de fornecedor.
          </p>

          <!-- Open Source & Self-Hosted labels -->
          <div class="flex flex-wrap items-center justify-center gap-3 mb-8 text-sm sm:text-base text-white/60 animate-fade-in-up animate-delay-200">
            <span class="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full border border-white/10">
              üîì 100% C√≥digo Aberto
            </span>
            <span class="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full border border-white/10">
              üè† Somente Auto-Hospedado (por enquanto)
            </span>
          </div>

          <!-- CTA Buttons -->
          <div
            class="flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4 animate-fade-in-up animate-delay-300"
          >
            <a
              href="https://demo.vigi.run"
              class="btn-secondary text-center"
              target="_blank"
            >
              Experimente a Demo
            </a>
            <a
              href="https://github.com/vigi-run/vigi?tab=readme-ov-file#quick-start-docker--sqlite"
              class="btn-primary text-center"
              target="_blank"
            >
              In√≠cio R√°pido
            </a>
            <a
              href="https://github.com/vigi-run/vigi"
              class="btn-secondary text-center flex items-center justify-center gap-2"
              target="_blank"
              rel="noopener noreferrer"
            >
              <span>‚≠ê</span>
              <span>Marcar com Estrela no GitHub</span>
              <span id="github-stars" class="text-gradient font-semibold"></span>
            </a>
          </div>
        </div>

        <!-- Demo Image Section -->
        <div class="relative z-10 mt-12 sm:mt-16 max-w-[1200px] mx-auto animate-fade-in-up animate-delay-400">
          <!-- Mobile image -->
          <div class="md:hidden">
            <div class="relative rounded-xl overflow-hidden border border-white/10 shadow-2xl shadow-black/50">
              <img
                src="/demo.webp"
                alt="Vigi"
                class="w-full"
              />
            </div>
          </div>

          <!-- Desktop image with mascot -->
          <div class="hidden md:flex justify-center">
            <div class="relative">
              <div class="rounded-xl overflow-hidden border border-white/10 shadow-2xl shadow-black/50">
                <img
                  src="/demo.webp"
                  alt="Vigi"
                  class="w-full max-w-[1056px]"
                />
              </div>
              <img
                src="/meerkat.webp"
                alt="Meerkat mascot"
                class="absolute -bottom-[80px] -right-[140px] w-[240px] lg:w-[320px] z-10 drop-shadow-2xl"
              />
            </div>
          </div>
        </div>
      </section>

      <Monitors />
      <Alerts />
      <TechStack />
      <Testimonials />
      <FAQ />

      <!-- SEO Content Section -->
      <section class="max-w-screen-lg mx-auto px-4 sm:px-8 py-8">
        <div class="flex justify-center mb-4">
          <button
            id="seo-toggle"
            class="text-white/50 hover:text-white/80 font-semibold px-6 py-2 rounded-full border border-white/10 hover:border-white/20 transition-all duration-200 bg-white/5"
            aria-expanded="false"
            aria-controls="seo-content"
          >
            <span id="seo-toggle-text">Mostrar Mais</span>
            <span id="seo-toggle-icon" class="ml-2 inline-block">‚ñº</span>
          </button>
        </div>
        <div
          id="seo-content"
          class="seo-content-hidden prose prose-invert max-w-none text-white/60 text-sm sm:text-base leading-relaxed"
        >
          <h2 class="text-2xl font-bold text-white mb-4">Monitor de tempo de atividade auto-hospedado para controle de disponibilidade de servi√ßo</h2>

          <p class="mb-4">
            Um monitor de tempo de atividade auto-hospedado √© a base de uma infraestrutura est√°vel e previs√≠vel. Quando sites, APIs ou servi√ßos internos ficam indispon√≠veis, √© importante saber disso imediatamente, n√£o pelos usu√°rios. Nosso servi√ßo permite que voc√™ acompanhe a disponibilidade e a operacionalidade da infraestrutura em tempo real, totalmente dentro do seu ambiente e sob seu controle.
          </p>

          <p class="mb-4">
            A plataforma √© implantada em seu servidor ou em sua nuvem e n√£o depende de servi√ßos externos. Todos os dados de monitoramento s√£o armazenados com voc√™, sem serem transferidos para terceiros. Essa abordagem √© especialmente importante para projetos com requisitos aumentados de seguran√ßa, privacidade e gerenciamento de infraestrutura.
          </p>

          <p class="mb-4">
            Nosso monitor de tempo de atividade auto-hospedado √© adequado tanto para pequenas equipes quanto para projetos em crescimento com arquitetura distribu√≠da. O sistema escala facilmente, n√£o o vincula a provedores de terceiros e fornece uma compreens√£o transparente do estado dos servi√ßos a qualquer momento.
          </p>

          <h3 class="text-xl font-semibold text-white mt-6 mb-3">Capacidades do monitor de tempo de atividade auto-hospedado</h3>
          <p class="mb-4">
            A plataforma suporta uma ampla gama de verifica√ß√µes necess√°rias para o monitoramento de disponibilidade moderno. Voc√™ pode rastrear sites HTTP e HTTPS, endpoints de API, portas TCP, ping ICMP, consultas DNS, verifica√ß√µes de Webhook no modo push, bancos de dados e corretores de mensagens. O monitoramento de cont√™ineres Docker, servi√ßos gRPC e servi√ßos SNMP tamb√©m √© suportado, o que permite controlar tanto o per√≠metro externo quanto os componentes internos da infraestrutura.
          </p>
          <p class="mb-4">
            Quando ocorrem problemas, o servi√ßo envia instantaneamente notifica√ß√µes atrav√©s de canais convenientes: Telegram, Slack, Email, WhatsApp, Discord, Webhook e outros. As notifica√ß√µes podem ser configuradas de forma flex√≠vel, separadas por n√≠veis de gravidade e adaptadas aos processos da equipe para que as respostas sejam r√°pidas e sem ru√≠do desnecess√°rio.
          </p>
          <p class="mb-4">
            Para transpar√™ncia de disponibilidade, s√£o fornecidas p√°ginas de status. Elas podem ser p√∫blicas para clientes ou privadas para uso interno e exibir o estado atual dos servi√ßos em um formato claro e visual. Isso ajuda a reduzir o n√∫mero de solicita√ß√µes de suporte e aumentar a confian√ßa no servi√ßo.
          </p>

          <p class="mb-4">
            A plataforma √© totalmente auto-hospedada: voc√™ escolhe o banco de dados ‚Äî SQLite para um in√≠cio f√°cil ou PostgreSQL e MongoDB para cargas de trabalho de produ√ß√£o. Voc√™ controla o armazenamento, o acesso e a seguran√ßa dos dados. Autentica√ß√£o de dois fatores, prote√ß√£o contra ataques de for√ßa bruta e monitoramento das datas de expira√ß√£o do certificado SSL s√£o suportados.
          </p>

          <p class="mb-4">
            Nosso servi√ßo √© focado em equipes que precisam de um monitor de tempo de atividade auto-hospedado confi√°vel sem aprisionamento de fornecedor, com configura√ß√£o flex√≠vel, uma interface moderna e a capacidade de controlar totalmente a infraestrutura. Ajuda a detectar falhas em tempo h√°bil, manter a estabilidade do servi√ßo e garantir a transpar√™ncia de sua opera√ß√£o.
          </p>
        </div>
      </section>
    </main>
    <Footer />
    <script>
      (async () => {
        const el = document.getElementById("github-stars");
        if (!el) return;
        try {
          const res = await fetch(
            "https://green-night-b63d.yojji.workers.dev/?owner=0xfurai&repo=vigi",
            {
              headers: { accept: "application/json" },
              cache: "no-store",
            }
          );
          if (!res.ok) return;
          const data = await res.json();

          const formatted = new Intl.NumberFormat("en", {
            notation: "compact",
            compactDisplay: "short",
            maximumFractionDigits: 1,
          }).format(data?.stars);
          el.textContent = formatted;
        } catch (err) {
          console.log(err);
        }
      })();

      // SEO content toggle functionality
      (() => {
        const toggleButton = document.getElementById("seo-toggle");
        const seoContent = document.getElementById("seo-content");
        const toggleText = document.getElementById("seo-toggle-text");
        const toggleIcon = document.getElementById("seo-toggle-icon");

        if (!toggleButton || !seoContent) return;

        toggleButton.addEventListener("click", () => {
          const isExpanded = seoContent.classList.contains("seo-content-visible");

          if (isExpanded) {
            seoContent.classList.remove("seo-content-visible");
            seoContent.classList.add("seo-content-hidden");
            toggleText.textContent = "Mostrar Mais";
            toggleIcon.textContent = "‚ñº";
            toggleButton.setAttribute("aria-expanded", "false");
          } else {
            seoContent.classList.remove("seo-content-hidden");
            seoContent.classList.add("seo-content-visible");
            toggleText.textContent = "Mostrar Menos";
            toggleIcon.textContent = "‚ñ≤";
            toggleButton.setAttribute("aria-expanded", "true");
          }
        });
      })();
    </script>
  </body>
</html>
